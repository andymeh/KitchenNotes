@model IEnumerable<KitchenNotesWeb.Models.DetailedTaskModel>
@{string IsUserAdmin = Html.Action("IsUserAdmin", "User").ToString();}


@if (Model != null && Model.Count() > 0)
{
    foreach (var item in Model)
    {
        <div class="col-lg-4">
            <div class="panel panel-green">

                <div class="panel-heading">
                    @if (string.Equals(item.username, User.Identity.Name, StringComparison.CurrentCultureIgnoreCase) || IsUserAdmin.Equals("True"))
                    {
                        <div class="pull-right">
                            <a href=''><i class="glyphicon glyphicon-edit"></i></a>
                            <a href='@Url.Action("DeleteTask", "Tasks", new { TaskId = item.task.TaskId })'><i class="glyphicon glyphicon-trash"></i> </a>
                        </div>
                    }
                    <h3 class="panel-title"><i class="fa fa-tasks fa-fw"></i><a class="activeLink" onclick="location.href='@Url.Action("AccountInfo", "User", new { username = item.username })'">@Html.DisplayFor(modelItem => item.username)</a>  : @Html.DisplayFor(modelItem => item.forename) </h3>

                </div>
                <div class="panel-body mypanel" style="word-wrap:break-word; padding-bottom:5px">

                    <h4>
                        @Html.DisplayFor(modelItem => item.taskDetail)
                    </h4>
                        <hr />
                    <h6>
                        @Html.DisplayFor(modelItem => item.assignedTo)
                    </h6>
                </div>
                <div class="panel-footer">
                    @Html.DisplayFor(modelItem => item.timeAgo)
                </div>
            </div>
        </div>
    }
}